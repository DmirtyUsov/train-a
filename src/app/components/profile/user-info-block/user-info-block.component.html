<p-card class="" header="Profile">
  <ng-template pTemplate="subtitle">
    @if (isManager$ | async) {
      <p class="font-semibold text-right text-2xl">Manager</p>
    }
  </ng-template>

  <div class="flex flex-col md:flex-row gap-4">
    <div class="flex flex-col flex-1">
      <label class="mb-2 font-semibold text-2xl" for="name">Name:</label>
      @if (!isEditingName) {
        <div class="flex items-center">
          <p class="flex-grow" id="name">{{ (user$ | async)?.name }}</p>
          <p-button icon="pi pi-pencil" (click)="editName()"></p-button>
        </div>
      } @else {
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-user"></i>
          </p-inputGroupAddon>
          <input
            pInputText
            placeholder="{{ (user$ | async)?.name }}"
            [(ngModel)]="newName"
          />
          <p-button
            icon="pi pi-save"
            [loading]="isLoading$ | async"
            (onClick)="saveName()"
          ></p-button>
        </p-inputGroup>
      }
    </div>

    <p-divider class="hidden md:inline-flex" layout="vertical" />

    <div class="flex flex-col flex-1">
      <label class="mb-2 font-semibold text-2xl" for="email">Email:</label>
      @if (!isEditingEmail) {
        <div class="flex items-center">
          <p class="flex-grow" id="email">{{ (user$ | async)?.email }}</p>
          <p-button icon="pi pi-pencil" (click)="editEmail()"></p-button>
        </div>
      } @else {
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-envelope"></i>
          </p-inputGroupAddon>
          <input
            pInputText
            placeholder="{{ (user$ | async)?.email }}"
            [(ngModel)]="newEmail"
          />
          <p-button
            icon="pi pi-save"
            [loading]="isLoading$ | async"
            (onClick)="saveEmail()"
          ></p-button>
        </p-inputGroup>
      }
    </div>
  </div>

  <ng-template pTemplate="footer">
    <p-button label="LogOut" severity="danger" (click)="logout()"></p-button>
  </ng-template>
</p-card>
